<template id="account_invoicedocument" inherit_id="account.report_invoice_document">
    <!-- Modify the t-call to use the custom external layout -->
    <xpath expr="//t[@t-call='web.external_layout']" position="attributes">
        <attribute name="t-call">custom_document_reports.custom_external_layout</attribute>
    </xpath>

    <!-- Set the company variable for the custom layout -->
    <xpath expr="//t[@t-call='custom_document_reports.custom_external_layout']" position="inside">
        <t t-set="company" t-value="o.company_id"/>
    </xpath>

    <!-- Replace the entire Partner section -->
    <xpath expr="//div[contains(@class, 'row')]" position="inside">
        <div class="row customer-info">
            <t t-if="o.partner_shipping_id and (o.partner_shipping_id != o.partner_id)">
                <div class="col-4">
                    <strong>Customer Name:</strong> <span t-field="o.partner_id.name"/>
                    <br/>
                    <strong>Telephone:</strong> <span t-field="o.partner_id.phone"/>
                    <br/>
                    <strong>Location:</strong>
                    <span>
                        <t t-esc="o.partner_id.city"/> 
                        <t t-if="o.partner_id.state_id">, <t t-esc='o.partner_id.state_id.name'/></t></t>
                    </span>
                    <br/>
                    <strong>KRA PIN:</strong> <span t-field="o.partner_id.kra_pin"/> <!-- Assuming kra_pin is a field -->
                    <br/>
                    <strong>Mobile No:</strong> <span t-field="o.partner_id.mobile"/> <!-- Assuming mobile is a field -->
                </div>
                <div class="col-4 text-center">
                    <strong>Self Collection</strong>
                </div>
                <div class="col-4 text-end">					
                    <h3 t-field="o.invoice_date_due" style="margin-bottom:3px" />
                    <span t-field="o.user_id.name"/> <!-- Person who prepared the quotation -->
                    <span t-field="o.name" />
                </div>
            </t>
            <t t-elif="o.partner_shipping_id and (o.partner_shipping_id == o.partner_id)">
                <div class="col-4">
                    <strong>Customer Name:</strong> <span t-field="o.partner_id.name"/>
                    <br/>
                    <strong>Telephone:</strong> <span t-field="o.partner_id.phone"/>
                    <br/>
                    <strong>Location:</strong>
                    <span>
                        <t t-esc="o.partner_id.city"/> 
                        <t t-if="o.partner_id.state_id">, <t t-esc='o.partner_id.state_id.name'/></t></t>
                    </span>
                    <br/>
                    <strong>KRA PIN:</strong> <span t-field="o.partner_id.kra_pin"/> <!-- Assuming kra_pin is a field -->
                    <br/>
                    <strong>Mobile No:</strong> <span t-field="o.partner_id.mobile"/> <!-- Assuming mobile is a field -->
                </div>
                <div class="col-4 text-center">
                    <strong>Self Collection</strong>
                </div>
                <div class="col-4 text-end">					
                    <h3 t-field="o.invoice_date_due" style="margin-bottom:3px" />
                    <span t-field="o.user_id.name"/> <!-- Person who prepared the quotation -->
                    <span t-field="o.name" />
                </div>
            </t>
            <t t-else="">
                <div class="col-4">
                    <strong>Customer Name:</strong> <span t-field="o.partner_id.name"/>
                    <br/>
                    <strong>Telephone:</strong> <span t-field="o.partner_id.phone"/>
                    <br/>
                    <strong>Location:</strong>
                    <span>
                        <t t-esc="o.partner_id.city"/> 
                        <t t-if="o.partner_id.state_id">, <t t-esc='o.partner_id.state_id.name'/></t></t>
                    </span>
                    <br/>
                    <strong>KRA PIN:</strong> <span t-field="o.partner_id.kra_pin"/> <!-- Assuming kra_pin is a field -->
                    <br/>
                    <strong>Mobile No:</strong> <span t-field="o.partner_id.mobile"/> <!-- Assuming mobile is a field -->
                </div>
                <div class="col-4 text-center">
                    <strong>Self Collection</strong>
                </div>
                < <div class="col-4 text-end">					
                    <h3 t-field="o.invoice_date_due" style="margin-bottom:3px" />
                    <span t-field="o.user_id.name"/> <!-- Person who prepared the quotation -->
                    <span t-field="o.name" />
                </div>
            </t>
        </div>
    </xpath>

    <!-- Remove the entire section for the invoice header and information -->
    <xpath expr="//h2" position="remove"/>
    <xpath expr="//div[@id='informations']" position="remove"/>
    <!-- Additional sections can be added here as needed -->
</template>